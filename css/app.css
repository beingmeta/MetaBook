/* -*- Mode: CSS; character-encoding: utf-8; -*- */

/* Copyright (C) 2009-2015 beingmeta, inc.
   This file implements a Javascript/DHTML web application for reading
    large structured documents (sBooks).

   For more information on sbooks, visit www.sbooks.net
   For more information on knodules, visit www.knodules.net
   For more information about beingmeta, visit www.beingmeta.com

   This library uses the FDJT (www.fdjt.org) toolkit.

   This program comes with absolutely NO WARRANTY, including implied
   warranties of merchantability or fitness for any particular
   purpose.

    Use and redistribution (especially embedding in other
      CC licensed content) is permitted under the terms of the
      Creative Commons "Attribution-NonCommercial" license:

          http://creativecommons.org/licenses/by-nc/3.0/ 

    Other uses may be allowed based on prior agreement with
      beingmeta, inc.  Inquiries can be addressed to:

       licensing@biz.beingmeta.com

   Enjoy!

*/

@charset "UTF-8";

/* Major wrappers and rules */

body._FULLWIDTH #CODEXPAGE { max-width: inherit;}
body._SCROLL #CODEXPAGE, img.metabookpagebutton { display: none;}

body._BYPAGE { overflow: hidden; }
body._BYPAGE #CODEXCONTENT { display: none;}
body.mbLAYOUT #CODEXCONTENT { display: none;}

.inlinesymbol { font-size: 120%; vertical-align: baseline;}
.inlinesymbol img { height: 1.5ex; width: auto;}

/* The page content gets a little transparent when the HUD comes up*/
body._ANIMATE.hudup #CODEXPAGE {
    transition-property: opacity;
    -webkit-transition-property: opacity;
    -moz-transition-property: opacity;
    -o-transition-property: opacity;
    transition-duration: 0.2s; 
    -webkit-transition-duration: 0.2s;
    -o-transition-duration: 0.2s;
    -moz-duration: 0.2s;}
body.hudup #CODEXPAGE {
    opacity: 0.8;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    filter: alpha(opacity=80);
    -webkit-opacity: 0.80;
    -khtml-opacity: 0.80;
    -moz-opacity: 0.80;
    -o-opacity: 0.80;}
body.hudup.mbPREVIEW #CODEXPAGE {
    opacity: 1;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -webkit-opacity: 1;
    -khtml-opacity: 1;
    -moz-opacity: 1;
    -o-opacity: 1;}

/* When the page is shrunk, the border is visible */
body.mbPREVIEW #CODEXPAGE, body.mbSHRINK #CODEXPAGE  {
    border-color: rgba(48, 60, 97, 0.54);}

/* This is for page shrinking when appropriate */
body._ANIMATE #CODEXPAGE {
    transition-property: opacity,transform;
    -webkit-transition-property: -webkit-opacity,-webkit-transform;
    -moz-transition-property: -moz-opacity,-moz-transform;
    -o-transition-property: -o-opacity,-o-transform;
    transition-duration: 0.25s; -webkit-transition-duration: 0.25s;
    -moz-duration: 0.25s; -o-transition-duration: 0.25s;}
body #CODEXPAGE {
    transform: scale(1,1); -webkit-transform:scale(1,1);
    -moz-transform: scale(1,1); -o-transform:scale(1,1);}
body._NOSHRINK #CODEXPAGE {
    transform: inherit; -webkit-transform: inherit;
    -moz-transform: inherit; -o-transform: inherit;}
body.mbSHRINK #CODEXPAGE, body.mbPREVIEW #CODEXPAGE,
body.mbSKIMMING #CODEXPAGE {
    transform-origin: center center;
    -webkit-transform-origin: center center;
    -moz-transform-origin: center center;
    -o-transform: center center;}

body._ANIMATE._NOSHRINK #CODEXPAGE .codexpage {
    transform: inherit; -webkit-transform: inherit;
    -moz-transform: inherit; -o-transform: inherit;}
body.mbSHRINK #CODEXPAGE .codexpage,
body.mbPREVIEW #CODEXPAGE .codexpage,
body.mbSKIMMING #CODEXPAGE .codexpage {
    transform: scale(0.98,0.98); -webkit-transform:scale(0.98,0.98);
    -moz-transform: scale(0.98,0.98); -o-transform:scale(0.98,0.98);}

#CODEXPAGE #METABOOKPAGES {
    position: absolute;
    top: 0px; bottom:0px; left: 0px; right: 0px;
    padding: 0px; margin: 0px; border: 0px;
    overflow: visible;}

body._BYPAGE {
    margin-top: 0px; margin-bottom: 0px;
    margin-left: 0px; margin-right: 0px;}

body._SCROLL #CODEXCONTENT {
    padding-left: 3em; padding-right: 3em;}

#CODEXCONTENT > * {
    max-width: inherit;}

#CODEXCONTENT, #CODEXCONTENT p, #CODEXCONTENT div {
    user-select: auto;
    -o-user-select: auto;
    -moz-user-select: auto;
    -webkit-user-select: auto;}

body.mbSTARTUP #CODEXCONTENT {
    opacity: 0.35;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=35)";
    filter: alpha(opacity=35);
    -webkit-opacity: 0.35;
    -khtml-opacity: 0.35;
    -moz-opacity: 0.35;
    -o-opacity: 0.35;}

#CODEXPAGE #METABOOKPAGES #CODEXCONTENT {
    text-align: left;
    padding: 0px; margin: 0px; border: 0px;
    /* This should make space for glossmarks and buttons */
    padding-left: 32px; padding-right: 32px;
    margin-right: 0px;}

body._BYPAGE #CODEXPAGE #CODEXCONTENT .metabookpagebreak {
    column-break-before: always;
    break-before: always;
    -o-column-break-before: always;
    -webkit-column-break-before: always;
    -moz-column-break-before: always;}

#METABOOKASIDE {
    position: absolute; z-index: -100;
    top: 60px; left: 60px; right: 60px; bottom: 60px;
    display: none;}
#METABOOKREF {
    position: absolute; z-index: -100;
    top: 60px; left: 60px; right: 60px;
    display: none;}

body._ANIMATE body.metabookfixed div.codexpage {
    transition-property: opacity; transition-duration: 0.5s;
    -o-transition-property: opacity; -o-transition-duration: 0.5s;
    -moz-transition-property: opacity; -moz-transition-duration: 0.5s;
    -webkit-transition-property: opacity; -webkit-transition-duration: 0.5s;}

/* The content */

span.excerpt {
    color: gray;
    font-family: times,serif; line-height: 1.0;
    background-color: rgba(255,255,0,0.5);}
span.excerpt span.content { font-size: 80%; display: none;}
.showexcerpt span.excerpt span.content { display: inline;}
.showexcerpt span.excerpt span.ellipsis { display: none;}
span.excerpt.ellipsis span.elision, span.excerpt.ellipsis span.delision {
    color: purple; font-style: italic;}
span.note.ellipsis span.elision, span.note.ellipsis span.delision {
    color: purple; font-style: italic;}

/* Define some rules inside of the HUD */

#METABOOKFRAME table tr {
    /* Some documents may define style rules for TR which we want to override */
    background-color: transparent;
    border: 0px transparent;}
#METABOOKFRAME input[TYPE="TEXT"] {
    box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;
    padding-left: 0.3ex;}

/* Fuzzy selections */

html._TOUCH .fdjtselecting .fdjtselectloupe { display: inline-block; }

.fdjtselected {
    box-shadow: 0px 0px 0.5ex 0.5ex rgba(255, 255, 0, 0.33);}
.fdjtselectstart, .fdjtselectend {
    box-shadow: 0px 0px 0.5ex 0.5ex rgba(255, 215, 0, 0.33);}

.fdjtselecting .fdjtselected {
    background-color: rgba(255,255,0,0.5); }
.fdjtselecting .fdjtselectstart, .fdjtselecting .fdjtselectend {
    background-color: rgba(255,215,0,0.5); }


#METABOOKBODY .fdjtselectwrap {
    background-color: transparent; }

/* DTerms */

.dterm {
    padding-right: 0.2ex; padding-left: 0.35em; 
    color: darkblue; background-color: gold;
    border: solid yellow 2px;}
.dterm, .rawterm {
    white-space: nowrap;}
.dterm sub, .dterm sup {padding-left: 0.1ex;}
.dterm sup {
    font-size: 100%; font-weight: bold; color: black;
    top: -0.2ex;}

.dterm.weak {
    background-color: silver; rbga(0,0,0,0.8);}
.rootform {
    color: rbga(0,0,0,0.8); font-weight: bold;}
.rawterm, .rootform {
    color: black;}
.rootform { font-weight: bold; }

/* Gloss links */

.glosslink {
    background-color: lightblue;
    border: solid blue 1px;
    padding-right: 1ex; border-radius: 1ex;}
.glosslink .linktext { color: blue; }
.glosslink .linktext {
    text-decoration: underline;}
.glosslink.glossdata .linktext {
    text-decoration: overline;}

/*
div.searchbox div.query span.dterm {
    padding-right: 0.35em; padding-left: 1ex;
    padding-top: 0px; padding-bottom: 0px;
    border-top-left-radius: 1ex; border-bottom-left-radius: 1ex;
    color: darkblue; background-color: gold; border: solid yellow 2px;}
*/

/* Other default rules */

.tapholdtarget { border-color: blue;}
.fdjtselecting .tapholdtarget { border-color: none;}
#METABOOKPAGEBAR .tapholdtarget { border-color: none;}

/* The HUD */

/* "Leading" to fill out the top and bottom */

div.leading { height: 50px; width: 100%;}
#SBOOKTOPLEADING { height: 50px; width: 100%;}
#SBOOKBOTTOMLEADING { height: 50px; width: 100%;}

/* Margins */

body.sbookpagevertical { overflow: hidden;}

body div.metabookmargin {
    position: absolute; display: block;
    background-color: white; z-index: 200;}

body.sbooknopage div.metabookmargin  { display: none;}

body div.metabookmargin#METABOOKPAGEHEAD,
body div.metabookmargin#METABOOKPAGEFOOT {
    left: 0px; right: 0px; width: 100%; height: 20px; z-index: 75;
    text-align: center;}
body div.metabookmargin#METABOOKPAGEHEAD { top: 0px; }
body div.metabookmargin#METABOOKPAGEFOOT { bottom: 0px; vertical-align: bottom;}
body._SCROLL #METABOOKPAGEFOOT, body._SCROLL #METABOOKPAGEHEAD { display: none;}

#METABOOKPAGES.pageswitch {
    opacity: 0.0001;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)";
    filter: alpha(opacity=1);
    -webkit-opacity: 0.0001;
    -khtml-opacity: 0.0001;
    -moz-opacity: 0.0001;
    -o-opacity: 0.0001;}

/* About information */

div.sbookabout { margin-left: 70px; margin-right: 35px;}
div.sbookabout div.title { font-size: 150%;}
div.sbookabout div.byline { font-size: 125%; font-weight: bold;}
div.sbookabout div.publisher { font-style: italic;}

.sbookabout img.portrait, .sbookabout img.cover {
    max-width: 25%; height: auto; padding-left: 1em; float: right;}

/* Conditional display */

div.logindoc { display: none;}

.fortouch { display: none;}
html._TOUCH .notouch { display: none;}
html._TOUCH div.fortouch,
html._TOUCH p.fortouch {
    display: block;}
html._TOUCH .fortouch {display: inline;}
html._TOUCH li.fortouch {display: list-item;}
html._TOUCH span.fortouch { display: inline;}
html._TOUCH div.fortouch { display: block;}
html._TOUCH p.fortouch { display: block;}
html._TOUCH li.fortouch { display: list-item;}
/* Make checkboxes bigger */
html._TOUCH .checkspan input[TYPE="CHECKBOX"],
html._TOUCH .checkspan input[TYPE="RADIO"] {
    height: 1em; width: 1em;}

body._MOUSE._USESVG img.fortouch.svg,
html._TOUCH._USESVG img.notouch.svg {
    display: none !important;}

body img.touchicon { display: none;}
body img.mouseicon { display: inline;}
html._TOUCH img.touchicon { display: inline;}
html._TOUCH img.mouseicon { display: none;}

div.locbar {
    background-color: ivory;
    width: 100%; clear: both;
    min-height: 6px; height: 6px;
    border: 0px; margin: 0px; padding: 0px;
    margin-bottom: 2px;}
div.locbar hr {
    color: red; background-color: white; min-width: 3px;
    border-right: solid gold 1px; border-left: solid gold 1px;
    position: relative; left: 0px; width: 100%; height: 100%;
    border: 0px; padding: 0px; margin: 0px;}

/* Glossmarks */

.glossmark {
    position: absolute; right: 0px;
    /* float: right; text-align: right; */
    margin: 0px; padding: 0px; text-indent: 0px; 
    border: 0px;
    border-right: solid rgba(70,130,180,0.70) 6px;
    width: 0px; overflow: visible;
    width: 56px; height: 50px;
    box-sizing: border-box; -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    z-index: 50;}
#CODEXPAGE .glossmark {margin-right: -50px;}
body._NARROW div.fdjtselecting .glossmark {
    width: 10px; z-index: -20; }
div.fdjtselecting .glossmark > img {
    visibility: hidden;}
body._MOUSE div.fdjtselecting .glossmark:hover > img {
    visibility: visible;}
/* #CODEXCONTENT .glossmark { right: 5px;} */

body .glossmark > img {
    opacity: 0.01;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=01)";
    filter: alpha(opacity=01);
    -webkit-opacity: 0.01;
    -khtml-opacity: 0.01;
    -moz-opacity: 0.01;
    -o-opacity: 0.01;}

body._MOUSE .glossmark:hover > img, body._MOUSE .glossmark.hover > img {
    opacity: 0.50;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -webkit-opacity: 0.50;
    -khtml-opacity: 0.50;
    -moz-opacity: 0.50;
    -o-opacity: 0.50;}

body._MOUSE .glossmark#METABOOKOPENGLOSSMARK > img,
body._MOUSE .glossmark#METABOOKOPENGLOSSMARK:hover > img,
body._MOUSE .glossmark#METABOOKOPENGLOSSMARK.hover > img {
    opacity: 0.7;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
    filter: alpha(opacity=70);
    -webkit-opacity: 0.70;
    -khtml-opacity: 0.70;
    -moz-opacity: 0.70;
    -o-opacity: 0.70;}

.glossmark img {
    position: static;
    vertical-align: middle; text-align: right;
    float: right;}
.glossmark img { width: 100%; height: auto;}
.glossmark img.wedge {
    position: absolute; right: 0px; top: 0px;}

.mbSKIMMING .glossmark, .mbPREVIEW .glossmark {
    opacity: 0.5;}

/* Displaying the sbook target */

body._ANIMATE .mbtarget, body.mbSHRINK .mbtarget {
    transition-property: color,background-color;
    transition-duration: 6s;
    -o-transition-property: color,background-color;
    -o-transition-duration: 6s;
    -moz-transition-property: color,background-color;
    -moz-transition-duration: 6s;
    -webkit-transition-property: color,background-color;
    -webkit-transition-duration: 6s;}
body.hudup .mbtarget, body.mbSHRINK .mbtarget {
    cursor: pointer;}
body.hudup .mbtarget, body.mbSHRINK .mbtarget,
body.mbSKIMMING .mbtarget {
    /* outline: dotted silver 2px; */}

body.hudup .mbtarget.mbnewtarget {
    background-color: inherit; }
.mbnewtarget {color: blue; }
div.sbooksection.mbnewtarget, section.mbnewtarget,
div.sbooksection.mbnewtarget > *, section.mbnewtarget > * {
    color: inherit;}
section.mbnewtarget > *:first-child,
div.sbooksection.mbnewtarget > *:first-child {
    color: blue;}

/* Don't color the body
   (actually, the body should probably never be a target, but when it is...)
*/
body.mbtarget { color: inherit;}

body._ANIMATE .glossmark > img {
    transition-property: opacity;
    transition-duration: 0.5s;
    -o-transition-property: opacity;
    -o-transition-duration: 0.5s;
    -moz-transition-property: opacity;
    -moz-transition-duration: 0.5s;
    -webkit-transition-property: opacity;
    -webkit-transition-duration: 0.5s;}

.mbtarget > .glossmark {
    border-right-color: blue;} /* double */

html._MOUSE .glossmark:hover > img
{
    opacity: 0.9;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
    filter: alpha(opacity=90);
    -webkit-opacity: 0.90;
    -khtml-opacity: 0.90;
    -moz-opacity: 0.90;
    -o-opacity: 0.90;}

body.hudup .mbtarget > .glossmark > img {
    opacity: 0.80;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    filter: alpha(opacity=80);
    -webkit-opacity: 0.80;
    -khtml-opacity: 0.80;
    -moz-opacity: 0.80;
    -o-opacity: 0.80;}
body.openhud .mbtarget > .glossmark > img {
    opacity: 0.40;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
    filter: alpha(opacity=40);
    -webkit-opacity: 0.40;
    -khtml-opacity: 0.40;
    -moz-opacity: 0.40;
    -o-opacity: 0.40;}

/* Not logged in conditionalization */

html._NOUSER a.logout {display: none;}
html._NOUSER #SBOOKLOGOUT { display: none;}
html._NOUSER #METABOOKHUD div.hud#METABOOKSOURCES img.button.login {
    display: block;}

.mbwithuser, .mbdisconn, .mbwithconn, .mbneedlogin { display: none;}
html._USER .mbnouser { display: none;}

html._NOUSER span.mbnouser, html._NOUSER a.mbnouser,
html._NOUSER em.mbnouser, html._NOUSER strong.mbnouser {
    display: inline; }

html._NOUSER p._nouser, html._NOUSER div.mbnouser,
html._NOUSER blockquote.mbnouser { display: block; }

html._NOUSER tr.mbnouser { display: table-row; }
html._NOUSER tbody.mbnouser { display: table-row-group; }

html._USER span.mbwithuser, html._USER a.mbwithuser,
html._USER em.mbwithuser, html._USER strong.mbwithuser {
    display: inline; }

html._DISCONN span.mbdisconn, html._DISCONN a.mbdisconn,
html._DISCONN em.mbdisconn, html._DISCONN strong.mbdisconn {
    display: inline; }

html._DISCONN p.mbdisconn, html._DISCONN div.mbdisconn,
html._DISCONN blockquote.mbdisconn { display: block; }

html._DISCONN tr.mbdisconn { display: table-row; }
html._DISCONN tbody.mbdisconn { display: table-row-group; }

html._NOUSER tbody.mbneedlogin, html._DISCONN tbody.mbneedlogin {
    display: table-row-group; }
html._NOUSER tr.mbneedlogin, html._DISCONN tr.mbneedlogin {
    display: table-row; }
html._NOUSER p.mbneedlogin, html._DISCONN p.mbneedlogin,
html._NOUSER div.mbneedlogin, html._DISCONN div.mbneedlogin {
    display: block; }

html._USER p.mbwithuser, html._USER div.mbwithuser,
html._USER blockquote.mbwithuser { display: block; }

html._USER tr.mbwithuser { display: table-row; }
html._USER tbody.mbwithuser { display: table-row-group; }

html._CONN span.mbwithconn, html._CONN a.mbwithconn,
html._CONN em.mbwithconn, html._CONN strong.mbwithconn {
    display: inline; }

html._CONN p.mbwithconn, html._CONN div.mbwithconn,
html._CONN blockquote.mbwithconn { display: block; }

html._CONN tr.mbwithconn { display: table-row; }
html._CONN tbody.mbwithconn { display: table-row-group; }

/* Pagination stuff */

h1[toclevel='1'],h2[toclevel='1'] { page-break-before: always;}

.avoidbreakinside { page-break-inside: avoid;}

.alwaysbreakbefore { page-break-before: always;}
.alwaysbreakafter { page-break-after: always;}

.avoidbreakbefore { page-break-before: avoid;}

.avoidbreakafter { page-break-after: avoid;}
.avoidbreakafter.metabookdupstart, .avoidbreakafter.metabookdup {
    page-break-after: auto;}

.forcebreakbefore { page-break-before: always;}
.forcebreakafter { page-break-after: always;}

.sbookpage {
    display: block; 
    page-break-before: always;
    -o-page-break-before: always;
    -moz-page-break-before: always;
    -webkit-page-break-before: always;
    page-break-after: always;
    -o-page-break-after: always;
    -moz-page-break-after: always;
    -webkit-page-break-after: always;
    page-break-inside: avoid;
    -o-page-break-inside: avoid;
    -moz-page-break-inside: avoid;
    -webkit-page-break-inside: avoid;}

div.codexpage img.sbookpage {
    position: static; margin: auto;}
div.codexpage .sbookpage .sbookinfo {
    position: absolute; bottom: 0px; width: 100%;
    text-align: center;}

.backmatter {
    page-break-before: always;
    -o-page-break-before: always;
    -moz-page-break-before: always;
    -webkit-page-break-before: always;}
.frontmatter {
    page-break-after: always;
    -o-page-break-after: always;
    -moz-page-break-after: always;
    -webkit-page-break-after: always;}
.gutenberg {
    opacity: 0.5;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -webkit-opacity: 0.50;
    -khtml-opacity: 0.50;
    -moz-opacity: 0.50;
    -o-opacity: 0.50;}
body._MOUSE .gutenberg:hover {
    opacity: 1.0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -webkit-opacity: 1;
    -khtml-opacity: 1;
    -moz-opacity: 1;
    -o-opacity: 1;}

.sbookfullpage, .sbookcover, .sbooktitlepage, .sbookpage, .sbookstandalone {
    margin-left: auto; margin-right: auto;
    page-break-before: always;
    page-break-after: always;
    page-break-inside: avoid;}
img.sbookfullpage, img.sbookcover {
    margin-left: auto; margin-right: auto;
    display: block;}

.sbooktitlepage {text-align: center;}
.sbooktitlepage .titleblock {
    white-space: nowrap;}

/* HTML5ish elements */

details, .html5details {
    display: block;}
details > summary , .html5details > summary {
    display: block;}
#METABOOKBODY details, #METABOOKBODY .html5details {
    display: inline;}
#METABOOKBODY details > *, #METABOOKBODY .html5details > * {
    display: none;}
#METABOOKBODY details > summary, #METABOOKBODY details > .html5summary,
#METABOOKBODY .html5details > summary, #METABOOKBODY .html5details > .html5summary {
    color: blue; text-decoration: underline;
    display: inline; font-size: 80%;}

#METABOOKBODY aside > *,
#METABOOKBODY .html5aside > * { display: none;}
#METABOOKBODY aside > hgroup:first-child,
#METABOOKBODY aside > h1:first-child,
#METABOOKBODY aside > h2:first-child,
#METABOOKBODY aside > h3:first-child {
    margin-left: 2em; margin-right: 2em; padding: 1em;
    border: solid black 2px;
    display: block;}

#METABOOKBODY .sbooknote {display: none;}

#METABOOKBODY a[rel='sbooknote'],
#METABOOKBODY a[rel='footnote'],
#METABOOKBODY a[rel='endnote'],
#METABOOKBODY a.mbnoteref {
    font-size: 80%; vertical-align: super; margin-left: 0.5ex;
    color: darkblue; font-variant: small-caps;
    border-radius: 1ex; -webkit-border-radius: 1ex;
    -khtml-border-radius: 1ex; -moz-border-radius: 1ex;
    -o-border-radius: 1ex;}
body._MOUSE #METABOOKBODY a[rel='sbooknote']:hover,
body._MOUSE #METABOOKBODY a[rel='footnote']:hover,
body._MOUSE #METABOOKBODY a[rel='endnote']:hover {
    text-decoration: overline;}

#METABOOKBODY a.mbnoteref:before, a.mbackref:before {content: '[';}
#METABOOKBODY a.mbnoteref:after, a.mbackref:after {content: ']';}

a[href] { color: blue; background-color: transparent; text-decoration: none;}
body._MOUSE a[href]:hover {text-decoration: underline;}
#METABOOKBODY a.extref[href], #METABOOKBODY a.sbextref[href] {
    color: blue; text-decoration: underline;}

body._MOUSE a[href].extref:hover, body._MOUSE a[href].sbextref:hover,
a[href].extref.tapholding, body._MOUSE a[href].sbextref.tapholding,
.tapholding > a[href].extref, .tapholding > a[href].sbextref { 
    background-color: rgba(0,0,255,0.3);}

/* Block elements */

#METABOOKBODY #SBOOKDETAILS,
#METABOOKBODY #SBOOKASIDES,
#METABOOKBODY #SBOOKNOTES {
    page-break-before: always;}

#METABOOKBODY #SBOOKDETAILS detail,
#METABOOKBODY #SBOOKDETAILS .sbookdetail,
#METABOOKBODY #SBOOKDETAILS aside,
#METABOOKBODY #SBOOKDETAILS .sbookaside {
    page-break-before: always;}

div.metabookglossform form table {
    width: 100%;}
div.metabookglossform form table td {
    vertical-align: top; text-align: left;}
div.metabookglossform form table td.button {
    width: 50px; text-align: center;}
div.metabookglossform form table td textarea { width: 100%;}

/* New pagination model */

div.codexpage {
    position: absolute;
    box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;
    display: none;}
div.codexpage {
    padding: 2px;
    border: solid transparent 4px;
    margin: 0px;}

div.codexpage img.nomax { max-width: inherit; max-height: inherit;}

div.codexpage.curpage {display: block;}

div.codexpage.oldpage, div.codexpage.newpage { display: block; }

div.codexpage.previewpage { display: block; }
div.codexpage.curpage.hidepage {display: none;}
div.codexpage.curpage.hidepage.previewpage {display: block;}

body._ANIMATE.mbPREVIEW div.codexpage {
    transition-property: none !important;
    -o-transition-property: none !important;
    -moz-transition-property: none !important;
    -webkit-transition-property: none !important;}

body._ANIMATE #CODEXPAGE div.codexpage {
    transition-duration: 0.15s;
    -o-transition-duration: 0.15s;
    -moz-transition-duration: 0.15s;
    -webkit-transition-duration: 0.15s;}

body._ANIMATE div.codexpage {
    transition-property: opacity,transform;
    -o-transition-property: -o-opacity,-o-transform;
    -moz-transition-property: -moz-opacity,-moz-transform;
    -webkit-transition-property: -webkit-opacity,-webkit-transform;}

/* Fade-in/fade-out page animation */

div.codexpage, div.codexpage.newpage, div.codexpage.oldpage {
    opacity: 0.0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    -webkit-opacity: 0.00;
    -khtml-opacity: 0.00;
    -moz-opacity: 0.00;
    -o-opacity: 0.00;}
div.codexpage.curpage, div.codexpage.previewpage,
div.codexpage.newpage.curpage, div.codexpage.oldpage.curpage {
    opacity: 1; 
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=1);
    -webkit-opacity: 1.00;
    -khtml-opacity: 1.00;
    -moz-opacity: 1.00;
    -o-opacity: 1.00;}

/* Sliding page turns */

body._ANIMATE div.codexpage { transform: translate(0px,0px); }
body._ANIMATE div.codexpage.previewpage {
    transform: translate(0px,0px); }

div.codexpage.newpage { z-index: 100; }

body._ANIMATE div.codexpage.newpage.onright {
    transform: translate(100%,0%);
    -webkit-transform: translate(100%,0%);}
body._ANIMATE div.codexpage.newpage.onleft {
    transform: translate(-100%,0%);
    -webkit-transform: translate(-100%,0%);
    -moz-transform: translate(-100%,0%);
    -o-transform: translate(-100%,0%);}
body._ANIMATE div.codexpage.newpage.onright.curpage, div.codexpage.newpage.onleft.curpage {
    transform: translate(0%,0%);
    -webkit-transform: translate(0%,0%);
    -moz-transform: translate(0%,0%);
    -o-transform: translate(0%,0%);}

/* Special rules for overriding properties on split (dup) passages */

body #METABOOKBODY #CODEXPAGE .codexpage .metabookdupstart {
    padding-bottom: 0px;
    border-bottom-width: 0px;
    margin-bottom: 0px;}
body #METABOOKBODY #CODEXPAGE .codexpage .metabookdup {
    padding-top: 0px;
    border-top-width: 0px;
    margin-top: 0px;
    padding-bottom: 0px;
    border-bottom-width: 0px;
    margin-bottom: 0px;}
body #METABOOKBODY #CODEXPAGE .codexpage p.metabookdup,

img.metabookcoverpage {
    display: block;
    max-width: 100%; max-height: 100%;
    width: auto; height: auto;
    margin: auto;}

/* Highlighting */

body.mbSKIMMING .mbhighlightexcerpt,
body.mbPREVIEW .mbhighlightexcerpt,
body.openhud .mbhighlightexcerpt {
    background-color: yellow;}
body.mbSKIMMING .mbhighlightpassage,
body.mbPREVIEW .mbhighlightpassage,
body.openhud .mbhighlightpassage {
    background-color: rgba(255, 255, 0, 0.21);}
body.mbSKIMMING .mbhighlightsearch,
body.mbPREVIEW .mbhighlightsearch {
    background-color: gold;}
.mbpreviewing {color: rgb(122,34,95);}
section.mbpreviewing, div.html5section.mbpreviewing,
section.mbpreviewing p, div.html5section.mbpreviewing p,
section.mbpreviewing h1, div.html5section.mbpreviewing h1,
section.mbpreviewing h2, div.html5section.mbpreviewing h2,
section.mbpreviewing h3, div.html5section.mbpreviewing h3,
section.mbpreviewing h4, div.html5section.mbpreviewing h4,
section.mbpreviewing h5, div.html5section.mbpreviewing h5,
section.mbpreviewing h6, div.html5section.mbpreviewing h6,
section.mbpreviewing h7, div.html5section.mbpreviewing h7 {
    color: rgb(122,34,95); } 

.mbexcerpt {
    text-shadow: 0.2ex 0.2ex rgba(255, 215, 0, 0.53);}

/* Startup messages */

#METABOOKSTARTUPMESSAGES {
    position: absolute; z-index: -50;
    top: 0px; left: 100px; right: 100px; height: 50px;
    opacity: 0.0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    -webkit-opacity: 0;
    -khtml-opacity: 0;
    -moz-opacity: 0;
    -o-opacity: 0;
    display: none;}
body._ANIMATE #METABOOKSTARTUPMESSAGES {
    transition-property: opacity;
    transition-duration: 1s;
    -webkit-transition-property: opacity; -webkit-transition-duration: 1s;
    -o-transition-property: opacity;
    -o-transition-duration: 1s;
    -moz-transition-property: opacity;
    -moz-transition-duration: 1s;}
body.mbSTARTUP #METABOOKSTARTUPMESSAGES { display: block;}
div.startupmessage { display: none;}
div.startupmessage {
    text-align: center; font-size: 20px; font-weight: bold;
    color: black; background-color: lightgray;}

div.startupmessage.running {
    z-index: 300; opacity: 1.0; 
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -webkit-opacity: 1.00;
    -khtml-opacity: 1.00;
    -moz-opacity: 1.00;
    -o-opacity: 1.00;}


/* Logotypes */

.sbooks, .spresso {
    font-family: Times,serif;}
.sbooks em, .sbooks i, .spresso em, .spresso i {
    font-family: Arial,Verdana,Helvetica,sans-serif;
    font-style: oblique;
    font-variant: normal;
    color: blue;}

.beingmeta, .bmlogo { }
span.bmm {
    color: rgb(255,0,0);}
span.bme {
    color: rgb(228,100,17);}
span.bmt {
    color: green;}
span.bma {
    color: rgb(0,0,255);}

.metabook { }
.metabook > span {
    font-style: oblique; font-size: 100%; font-weight: bold;}
.metabook > sub {font-style: italic; color: red; font-size: 60%;}

.mupub { font-variant: small-caps;}
.mupub em, .mupub i {
    font-style: italic;
    font-variant: normal;
    color: blue; }

div.fdjtdialog.metabooktaptap .choices button {
     width: 12em; max-height: 3em;}
div.fdjtdialog.metabooktaptap .choices button.anchor {
    overflow: hidden; text-overflow: ellipsis; padding: 0px;
    line-height: 0.8;}
div.fdjtdialog.metabooktaptap .choices button.anchor .anchortext {
    color: blue; font-size: 80%;}
div.fdjtdialog.metabooktaptap .choices button.anchor .anchorcontext {
    font-size: 50%;}

/* Rules for page references */

.staticpageref {
    position: absolute; right: 0px; 
    font-size: 8px; font-size: 0.8rem;
    font-weight: normal; font-style: normal;
    display: none;}

/* Media rules */

@media (max-width: 500px) {
 .sbookfullpage, .sbookcover, .sbooktitlepage,
 .sbookpage, .sbookstandalone, .codexfullpage {
   page-break-inside: auto;}}


/* Emacs local variables
;;;  Local variables: ***
;;;  compile-command: "cd ../..; make" ***
;;;  indent-tabs-mode: nil ***
;;;  End: ***
*/

