/* -*- Mode: CSS; -*- */

/* Copyright (C) 2009 beingmeta, inc.
   This file implements a Javascript/DHTML UI for reading
    large structured documents (sBooks).

   For more information on sbooks, visit www.sbooks.net
   For more information on knowlets, visit www.knowlets.net
   For more information about beingmeta, visit www.beingmeta.com

   This library uses the FDJT (www.fdjt.org) toolkit.

   This program comes with absolutely NO WARRANTY, including implied
   warranties of merchantability or fitness for any particular
   purpose.

    Use and redistribution (especially embedding in other
      CC licensed content) is permitted under the terms of the
      Creative Commons "Attribution-NonCommercial" license:

          http://creativecommons.org/licenses/by-nc/3.0/ 

    Other uses may be allowed based on prior agreement with
      beingmeta, inc.  Inquiries can be addressed to:

       licensing@biz.beingmeta.com

   Enjoy!

*/

/* New design for web-based version:

   4 HUDs:
     A top TOC bar
     A bottom search bar
     A left-hand social bar
     A central 'results' HUD
   all 'underneath' a master HUD: SBOOKHUD

   A generic .hud class and individually ID'd DIV's for all 4 HUDs.
   The javascript will often replace the TOC and RESULTS hud

   In addition, podspots and iframes are overlays providing interactions
    with webechoes.
   
   The app has a mode, stored as a class on SBOOKHUD, which may be toc,
    searching, or browsing.  Non-selected HUDs are always collapsed.  The
    search and TOC HUDs are ghostly in collapsed form.  The results HUD
    is invisible when not selected.  When the results HUD is selected, the
    TOC hud is replaced with LOCATION bar indicating position within the
    book of a result. 

   Two other modes, preview and hudup, are stored as classes on BODY.
    * hudup makes all the HUD's more opaque and is controlled by
       the esc and shift keys
    * preview is for looking at the content summarized in the
       results HUD.  In preview mode, the TOC disappears, the search
        and social bars are visible but more ghostly.  The top has
        a 
*/

/* Highlight rules */

.sbookhead { text-decoration: underline;}
.sbookfocus:hover { text-decoration: underline;}
body.sbookhead { text-decoration: none;}

p.sbookclickfocus { text-decoration: underline;}

/* Display/opacity rules */

div#SBOOKHUD div.hud {
  background-color: gray; opacity: 0.1; z-index: 100;
  overflow: hidden; text-align: center; 
  font-family: sans,sans-serif;
  display: none;}
div#SBOOKHUD div.hud:hover { opacity: 0.9;}
body.hudup div#SBOOKHUD div.hud { opacity: 0.5;}
body.hudup div#SBOOKHUD div.hud:hover { opacity: 0.9;}

div#SBOOKHUD div.hud#SBOOKTOC {
  position: fixed;
  top: 0px; left: 75px; right: 75px; z-index: 140;
  max-height: 40px; min-height: 30px;
  margin: 0px; padding: 0px;
  display: block;
  -khtml-border-bottom-left-radius: 6px; 
  -webkit-border-bottom-left-radius: 6px; 
  -moz-border-radius-bottomleft: 6px; 
  border-bottom-left-radius: 6px; 
  -khtml-border-bottom-right-radius: 6px; 
  -webkit-border-bottom-right-radius: 6px; 
  -moz-border-radius-bottomright: 6px; 
  border-bottom-right-radius: 6px;}

div#SBOOKHUD div.hud#SBOOKSEARCH {
  position: fixed; 
  bottom: 0px; left: 75px; right: 75px; z-index: 140;
  margin: 0px; padding: 0px; min-height: 30px;
  display: block; padding-bottom: 2px; padding-top: 2px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px;}

div#SBOOKHUD div.hud#SBOOKECHOBAR {
  position: fixed; display: block;
  bottom: 40px; top: 40px; left: 0px; width: 40px;
  margin: 0px; padding: 0px; min-height: 80px;
  -khtml-border-bottom-right-radius: 6px; 
  -webkit-border-bottom-right-radius: 6px; 
  -moz-border-radius-bottomright: 6px; 
  border-bottom-right-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px;}

div#SBOOKHUD div.hud#SBOOKSEARCH div.echobar {
  position: fixed; display: none;
  bottom: 40px; top: 40px; left: 0px; width: 40px;
  margin: 0px; padding: 0px; min-height: 80px;
  border-right: solid orange 2px;
  -khtml-border-bottom-right-radius: 6px; 
  -webkit-border-bottom-right-radius: 6px; 
  -moz-border-radius-bottomright: 6px; 
  border-bottom-right-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px;}
div#SBOOKHUD.searching div.hud#SBOOKSEARCH div.echobar {
  opacity: 0.9;}
div#SBOOKHUD.searching div.hud#SBOOKSEARCH div.echobar {
  display: block;}
div#SBOOKHUD.searching div.hud#SBOOKECHOBAR {
  display: none;}

/* For scrollable results */

div#SBOOKHUD div#SBOOKRESULTS {
  position: fixed; bottom: 34px;
  left: 75px; right: 75px;
  background-color: gray; opacity: 0.1; z-index: 250;
  overflow: auto; max-height: 75%;
  margin: 0px; padding: 6px; padding-top: 0px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px;}

div#SBOOKHUD div.hud#SBOOKTOP {
  position: fixed;
  top: 0px; left: 75px; right: 75px; z-index: 140;
  max-height: 15px; min-height: 15px;
  margin: 0px; padding: 0px;
  display: none;}

/* There are three HUD UI modes: toc, searching, browsing */

div#SBOOKHUD.toc div.hud#SBOOKTOC div.supersections {
  display: block;}
div#SBOOKHUD.toc div.hud#SBOOKTOC div.subsections {
  display: block;}
div#SBOOKHUD.toc div.hud#SBOOKTOC {
  max-height: inherit;}

div#SBOOKHUD.searching div.hud#SBOOKSEARCH {
  max-height: inherit; opacity: 0.9;}
div#SBOOKHUD.searching div.hud#SBOOKRESULTS {
  display: none;}

div#SBOOKHUD.browsing div#SBOOKRESULTS {
 display: block; opacity: 0.9;}
body.preview div#SBOOKHUD.browsing div#SBOOKRESULTS { 
 opacity: 0.1; }
div#SBOOKHUD.browsing div#SBOOKTOC { display: none; }
div#SBOOKHUD.browsing div#SBOOKTOP { display: block; opacity: 0.4;}
div#SBOOKHUD.browsing div#SBOOKTOP:hover { display: block; opacity: 0.8;}
div#SBOOKHUD.browsing div.hud#SBOOKSEARCH {
  max-height: 30px; opacity: 0.9;
  -khtml-border-top-left-radius: 0px; 
  -webkit-border-top-left-radius: 0px; 
  -moz-border-radius-topleft: 0px; 
  border-top-left-radius: 0px; 
  -khtml-border-top-right-radius: 0px; 
  -webkit-border-top-right-radius: 0px; 
  -moz-border-radius-topright: 0px; 
  border-top-right-radius: 0px;}

/* div#SBOOKHUD a { color: lightblue;} */
div#SBOOKHUD img.button { opacity: 0.5; z-index: 200;}

div#SBOOKHUD div#SBOOKSEARCH.sbooksearch {
  text-align: left;}
div.sbooksearch div.query input[TYPE='TEXT'] {
  width: 100%; clear: both;}

div#SBOOKHUD #SBOOKTOC {display: none;}
div#SBOOKHUD .sbooksearch {display: none;}
div#SBOOKHUD .sbookechoes {display: none;}
div#SBOOKHUD .sbookping {display: none;}

body div#SBOOKHUD.toc #SBOOKTOC {display: block; }
body div#SBOOKHUD.search .sbooksearch {display: block; }
body div#SBOOKHUD.echoes .echoes {display: block; }
body div#SBOOKHUD.ping .sbookping {display: block; }

div#SBOOKSOCIAL {
  position: fixed; bottom: 0px; left: 15%; right: 15%;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px; 
  background-color: gray;}

div.echoes div.echo { display: none;}
div.echoes div.echo[displayed='yes'] { display: block;}
div.echoes.focused div.echo[displayed='yes'] { display: none;}
div.echoes.focused div.echo[displayed='yes'][focus='yes'] { display: block;}

div.echo div.head span.icons img { float: none; padding-left: 5px;}
div.echo div.head span.icons .age { color: orange;}

div.echobar { 
  overflow-y: auto; overflow-x: hidden;} 
div.echobar img { cursor: pointer;}
/* This forces the browser to scale the image, which isn't ideal */
div.echobar img.social { width: 32px; height: 32px;} 
div.echobar.limited img.social  {display: none;}
div.echobar.limited img.social[displayed='yes']  {display: inline;}
div.echobar img.social[displayed='yes']  {display: inline;}

div#SBOOKHUD div.echobar { opacity: 0.1; z-index: 150;}
div#SBOOKHUD div.echobar.filled { opacity: 0.50; z-index: 150;}
div#SBOOKHUD div.echobar:hover { opacity: 0.85; }
body div#SBOOKHUD.search div.echobar:hover { opacity: 0.85;}
body div#SBOOKHUD.toc div.echobar:hover { opacity: 0.85;}
body div#SBOOKHUD.browsing div.echobar { opacity: 0.05;}
body.hudechoes div#SBOOKHUD div.echobar { opacity: 0.85;}

/* Individual sub content */

div.sbookhud {}
div.sbookhud div.content {
  width: 100%; padding-left: 15%; padding-right: 15%;}

div#SBOOKHUD div#SOCIALHUD {
  position: fixed; bottom: 0px;
  margin-left: 10%; margin-right: 10%;}

/* TOC classes */

div.sbooktoc div.supersections { display: none;}
div.sbooktoc div.subsections { display: none;}

div.sbooktoc a { 
  text-decoration: none; color: blue;}
div.sbooktoc div.sbookhudsect {
  width: 100%; text-align: center; clear: both; }
div.sbooktoc div.sbookhudsect div.sectname {
  clear: both; } /* display: block;  */
div.sbooktoc div.supersection div.sectname {
  clear: both; } /* display: block; */
div.sbooktoc a:visited { color: blue; }
div.sbooktoc div.subsections a {color: blue;}

div.sbooktoc div.supersections a { font-size: 85%; }

div.sbooktoc div.subsections { 
  clear: both; font-size: 80%; margin-left: 15%; margin-right: 15%;}
div.sbooktoc div.subsections div.spanbar {
  width: 100%; clear: both;}
div.sbooktoc div.subsections div.sectlist {
  clear: both;}
div.sbooktoc div.subsections a {
    /* white-space: nowrap;  */
    display: inline; width: inherit; font-size: 50%;
    clear: none;}
div.sbooktoc div.subsections a.cohighlight {
    color: yellow;}

div.spanbar {
  position: relative;
  text-align: center; clear: both;
  opacity: 0.5; margin: 0px; padding: 0px; border: 0px;
  background-color: transparent; height: 14px; font-size: 3px;
  border-bottom: solid black 2px;}
div.spanbar div.spans { 
  position: relative;
  margin: 0px; padding: 0px; border: 0px;}
div.spanbar div.sbookhudspan {
  background-color: blue; clear: none; float: left;
  margin: 0px; padding: 0px; border: 0px;
  border-top: solid blue 2px; border-bottom: solid blue 2px;
  height: 10px; }
div.spanbar div.sbookhudspan[odd] {
  background-color: silver;
  border-top: solid silver 2px; border-bottom: solid silver 2px;}
div.spanbar div.sbookhudspan:hover { 
  border-top: dotted red 2px; border-bottom: dotted red 2px; }
div.spanbar div.sbookhudspan[odd]:hover {
  border-top: dotted red 2px; border-bottom: dotted red 2px; }
div.spanbar div.sbookhudspan.cohighlight { 
  background-color: yellow; border-color: yellow;}

div.sbooktoc div.echoes { 
  margin-left: 10%; margin-right: 10%;
  border-top: purple solid 3px;}
div.sbooktoc div.echoes div.echo { 
  padding-right: 5%; padding-left: 5%;}
div.sbooktoc div.echoes.showall div.echo { display: block;}

div#SBOOKHUD div#SOCIALTOC { 
  position: fixed; bottom: 0px; left: 10%; right: 10%;
  padding: 0px; margin: 0px; text-align: center;
  background-color: gray;
  overflow-y: hidden; overflow-x: auto; max-height: 60px;
  opacity: 0.05; display: none;}

div#SBOOKHUD.toc div#SOCIALTOC { display: block;}

div#SBOOKHEAD0 div.spanbar { width: 33%; margin-left: 33%; margin-right: 33%;}
div#SBOOKHEAD1 div.spanbar { width: 33%; margin-left: 33%; margin-right: 33%;}
div#SBOOKHEAD2 div.spanbar { width: 50%; margin-left: 25%; margin-right: 25%;}
div#SBOOKHEAD3 div.spanbar { 
  width: 75%; margin-left: 12.5%; margin-right: 12.5%;}

div.spanbar { padding: 0px; margin: 0px;}
div.spanbar div.spans { 
  width: 100%; height: 10px; padding: 0px; margin: 0px;}

div.spanbar div.progressbox { 
  width: 3px; height: 15px; background-color: red;
  position: absolute; z-index: 200; 
  margin: 0px; padding: 0px;}
div.spanbar div.rangebox { 
  height: 13px; /* border: orange solid 2px; */
  background-color: red; opacity: 0.5;
  position: absolute; z-index: 200; 
  margin: 0px; padding: 0px; border: 0px;}

/* Search rules */

div#SBOOKHUD.browsing
  div.sbooksearch .completions { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions.open { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions.open { display: none;}
div.sbooksearch .completions {
   margin-left: 0px; margin-right: 0px;
   max-height: 300px; width: 100%;}

div#SBOOKHUD div.hud#SBOOKSEARCH div.query {
   margin-left: 5%; margin-right: 5%;}

/* Search classes */

div#SBOOKHUD div.sbooksearch .completions { display: none;}
div#SBOOKHUD div.sbooksearch .completions.open { display: none;}
div#SBOOKHUD.searching div.sbooksearch div.completions { display: block;}
div#SBOOKHUD.searching div.sbooksearch div.completions.open { display: block;}

div.sbooksearch div.controls input[type="TEXT"] { 
  font-size: 16px; font-family: sans,sans-serif; 
  width: 100%; background-color: ivory;}
div.sbooksearch .completions { 
  text-align: left;
  font-size: 12px; font-family: sans,sans-serif; 
  padding-top: 5px; overflow: auto;}
div.sbooksearch .completions span.counts { 
  float: right; color: red; font-weight: bold;
  background-color: black;
  margin: 0px; padding: 3px; padding-top: 0px; padding-bottom: 0px;
  -khtml-border-radius: 3px; 
  -webkit-border-radius: 3px; 
  -moz-border-radius: 3px;
  border-radius: 3px;}
div.sbooksearch div.cues {}
div.sbooksearch div.query {}

div.sbooksearch span.completion.sectname {
  font-weight: bold; font-style: italic; 
  background-color: ivory; color: purple;
  padding: 3px; margin: 0px; margin-left: 3px; margin-right: 3px; 
  -khtml-border-radius: 6px; 
  -webkit-border-radius: 6px; 
  -moz-border-radius: 6px; 
  border-radius: 6px;}
div.sbooksearch span.dterm { 
  background-color: yellow; color: black;
  padding: 2px; padding-left: 5px;  margin: 0px;
  padding-right: 3px; margin-right: 3px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-bottom-left-radius: 6px; 
  -webkit-border-bottom-left-radius: 6px; 
  -moz-border-radius-bottomleft: 6px;
  border-bottom-left-radius: 6px;}
div.sbookresults span.dterm { 
  background-color: yellow; color: black;
  padding: 2px; padding-left: 5px;  margin: 0px;
  padding-right: 3px; margin-right: 3px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-bottom-left-radius: 6px; 
  -webkit-border-bottom-left-radius: 6px; 
  -moz-border-radius-bottomleft: 6px;
  border-bottom-left-radius: 6px;}
div.sbooksearch span.dterm span.bigpunct {
  font-size: 200%; font-weight: bold; line-height: 50%;}
div.sbooksearch .completions.showall span.dterm {display: inline;}
div.sbooksearch .completions.showall span.dterm.singleton {display: none;}
div.sbooksearch span.dterm span.disambig {color: red;}
div.sbooksearch .completions { line-height: 200%;}
div.sbooksearch .completions .completion.prime { 
  font-size: 200%; font-weight: bold;}
div.sbooksearch .completions .completion.sectname { 
  white-space: nowrap;}

div.sbooksearch .completions .completion .variation { 
  font-size: 115%; color: white;}
div.sbooksearch .completions .completion .dterm { 
  font-size: 95%;}

div.sbookresults {
  border-top: solid orange 3px;}
div.sbookresults div.count {
  text-align: right; color: orange; font-weight: bold;
  padding-top: 3px; }
div.sbookresults a.searchresult { 
  display: block; white-space: normal; clear: both;
  text-decoration: none;  font-size: 75%;
  margin-top: 4px; margin-bottom: 4px;
  margin-left: 50px; margin-right: 50px; 
  border-bottom: dotted orange 1px; padding-bottom: 3px;
  color: black; text-align: left;}
div.sbookresults a.searchresult.hidden { display: none;}
div.sbookresults a.searchresult .info { 
  float: right;}
div.sbookresults a.searchresult div.info { 
  float: right; width: 40px;}
div.sbookresults a.searchresult .info img.eye { 
  font-weight: bold; color: blue; border: none;}
div.sbookresults a.searchresult .info span.score {
  color: gold; display: none;}
div.sbookresults a.searchresult span.dterm {
    font-size: 75%;}
div.sbookresults a.searchresult span.head {
    font-size: 75%;}
div.sbookresults a.searchresult span.headhead {
    color: blue; font-weight: bold;}
div.sbookresults a.searchresult span.controller {
    font-weight: bold; color: white;}
a.searchresult span.msg { font-weight: bold; font-size: 110%;}
a.searchresult img.userpic { float: left; margin-right: 3px;}
a.searchresult .age { float: right; color: orange;}
a.searchresult img.detailsbutton { 
  float: right; border: none;
  margin-right: 3px; margin-left: 3px;}

span.excerpt { font-size: 120%; color: white;}
span.excerpt span.content { font-size: 80%; color: white; display: none;}
.showexcerpt span.excerpt span.content { display: inline;}
.showexcerpt span.excerpt span.ellipsis { display: none;}

div.detail { display: none; color: ivory; clear: both;}
.showdetail div.detail { display: block;}

/* Echoes stuff */

div#SBOOKHUD div.sbookechoes { }
div#SBOOKHUD div.sbookechoes div.echoes { 
  margin-top: 50px; margin-left: 15%; margin-right: 15%; width: 70%;}

div.sbookechoes div.topbar {
   width: 60%; margin-left: 20%; margin-right: 20%;}
div.sbookechoes div.topbar img { width: 32px; height: 32px;}

div.sbookechoes {
  width: 75%; margin-left: 12.5%; margin-right: 12.5%;
  text-align: left;}
div.sbookechoes div.topbar { width: 100%;}
div.sbookechoes div.topbar div.imagebar img[displayed='yes'] { display: inline;}
div.sbookechoes div.topbar div.imagebar img[displayed='no'] { display: none;}
div.sbookechoes img.addbutton { float: left;}
div.sbookechoes div.imagebar { margin-left: 50px; overflow-x: auto;}
div.sbookechoes div.echoes { overflow-y: auto;}
div.sbookechoes div.echoes div.echo {
   clear: both; width: 100%;}
div.sbookechoes div.echoes div.echo div.userblock { 
  float: left; width: 50px;}
div.sbookechoes div.echoes div.echo div.echoinfo {
  margin-left: 50px;}
div.sbookechoes div.echoes div.echo div.echoinfo div.msg {
  }
div.sbookechoes div.echoes div.echo div.echoinfo div.excerpt {
  }

/* Podspot iframes */

a.podspoticon {
  position: absolute; right: 5px; text-align: right;
  background-color: lightgray;
  border: solid transparent 1px;}
.sbookfocus a.podspoticon {
  border: solid black 1px;}
a.podspoticon img { border: 0px;}

img.ping.button#ROVER {
  position: absolute; right: 0px;}

iframe.podspot {
    position: absolute; right: 64px; width: 80%; z-index 100; 
    opacity: 0.95; background-color: ivory; min-height: 450;}

/* Still unclassified */

.previewing { color: red; }
p.previewing { color: red; }
div.previewing { color: red; }

div.sectionname { clear: both;}

/* SBOOK formatting */

body[hudup] iframe div.commentors { display: none;}
body iframe div.commentors { display: block;}

/* Emacs local variables
;;;  Local variables: ***
;;;  compile-command: "cd ..; make" ***
;;;  End: ***
*/
