/* -*- Mode: CSS; -*- */

/* Copyright (C) 2009 beingmeta, inc.
   This file implements a Javascript/DHTML UI for reading
    large structured documents (sBooks).

   For more information on sbooks, visit www.sbooks.net
   For more information on knowlets, visit www.knowlets.net
   For more information about beingmeta, visit www.beingmeta.com

   This library uses the FDJT (www.fdjt.org) toolkit.

   This program comes with absolutely NO WARRANTY, including implied
   warranties of merchantability or fitness for any particular
   purpose.

    Use and redistribution (especially embedding in other
      CC licensed content) is permitted under the terms of the
      Creative Commons "Attribution-NonCommercial" license:

          http://creativecommons.org/licenses/by-nc/3.0/ 

    Other uses may be allowed based on prior agreement with
      beingmeta, inc.  Inquiries can be addressed to:

       licensing@biz.beingmeta.com

   Enjoy!

*/

/* New design for web-based version:

    In normal mode, HUD consists of four icons in the four corners
     of the browser window.  The icons are for nav, search, echoes,
     and ping.  There aren't any next->prev buttons 
    Only one function mode is active at any time.
    Orthogonal to the four function modes (or five, if you count normal),
     there are display modes:
      * minimized (just icons)
      * hover (top strip appears, low opacity)
      * hudup (higher opacity, full height)
    Mouseover the top goes into hover mode (there are keystrokes too)
    Click on the top toggles in and out of hudup mode
    Click on an icon goes into that function mode and into hover,
     double click goes into hudup

    All these attributes are managed in the classes of the HUD.

    Preview mode gets toggled on the body and diminishes the HUD's
     opacity.

    More tweaks, after experimentation:
     SBOOECHOES is a top level element, as is SBOOKSOCIAL (the user bar)
     sbookSetEchoes does selective display on echoes
     SBOOKSOCIAL consists of a row of users with an "everyone"
      button on the left and a ping/remark button on the right.
      Clicking on a user/tribe brings up the echoes element and limits
       it to that user/tribe.
     In TOC mode, the space of users are people who have said things
      below the current article.
     In SEARCH mode, the space of users are people involved in the
      current search results

*/

/* Highlight rules */

.sbookhead { text-decoration: underline;}
.sbookfocus:hover { text-decoration: underline;}
body.sbookhead { text-decoration: none;}
/* p.sbookfocus { opacity: 0.9;} */

p.sbookclickfocus { text-decoration: underline;}

/* Display/opacity rules */

div#SBOOKHUD div.hud {
  background-color: gray; opacity: 0.2; z-index: 100;
  overflow: hidden; text-align: center; 
  font-family: sans,sans-serif;
  display: none;}
div#SBOOKHUD div.hud { opacity: 0.05; }
div#SBOOKHUD div.hud:hover { opacity: 0.9;}
body.hudup div#SBOOKHUD div.hud { opacity: 0.5;}
body.hudup div#SBOOKHUD div.hud:hover { opacity: 0.9;}

div#SBOOKHUD div.hud#SBOOKSEARCH {
  position: fixed; 
  bottom: 0px; left: 50px; right: 50px; z-index: 140;
  margin: 0px; padding: 0px; min-height: 25px;
  display: block; padding-bottom: 2px; padding-top: 2px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px;}
div#SBOOKHUD div.hud#SBOOKTOC {
  position: fixed;
  top: 0px; left: 50px; right: 50px; z-index: 140;
  max-height: 40px; min-height: 30px;
  margin: 0px; padding: 0px;
  border-left: solid black 2px; border-right: solid black 2px;
  display: block;
  -khtml-border-bottom-left-radius: 6px; 
  -webkit-border-bottom-left-radius: 6px; 
  -moz-border-radius-bottomleft: 6px; 
  border-bottom-left-radius: 6px; 
  -khtml-border-bottom-right-radius: 6px; 
  -webkit-border-bottom-right-radius: 6px; 
  -moz-border-radius-bottomright: 6px; 
  border-bottom-right-radius: 6px;}
div#SBOOKHUD.toc div.hud#SBOOKTOC div.supersections {
  display: block;}
div#SBOOKHUD.toc div.hud#SBOOKTOC div.subsections {
  display: block;}
div#SBOOKHUD.toc div.hud#SBOOKTOC {
  max-height: inherit;}
div#SBOOKHUD.searching div.hud#SBOOKSEARCH {
  max-height: inherit; opacity: 0.9;}
/* div#SBOOKHUD a { color: lightblue;} */
div#SBOOKHUD img.button { opacity: 0.5; z-index: 200;}
/* For scrollable results */
div#SBOOKHUD div.results {
  position: fixed; bottom: 25px;
  left: 50px; right: 50px;
  background-color: gray; opacity: 0.05; z-index: 250;
  overflow: auto; max-height: 75%;
  margin: 0px; padding: 6px; padding-top: 0px;
  display: none;}
div#SBOOKHUD div.echoes {
  position: fixed; bottom: 0px; margin-top: 50px;
  background-color: gray; opacity: 0.05; z-index: 250;
  left: 10%;; right: 10%; width: 80%;
  overflow: auto; margin: 0px; padding: 6px;
  padding-bottom: 50px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px; 
  display: none;}

body.hudechoes div.echoes { }
body.hudechoes.preview div#SBOOKHUD 
  div.echoes { display: block; opacity: 0.10;}
body.hudresults.preview div#SBOOKHUD
  div.results { display: block; opacity: 0.10;}
body.hudresults.preview div#SBOOKHUD
  div.hud { display: block; opacity: 0.10;}


div#SBOOKHUD div#SBOOKSEARCH.sbooksearch {
  text-align: left;}
div.sbooksearch div.query input[TYPE='TEXT'] {
  width: 100%; clear: both;}

body.preview div#SBOOKHUD div#SBOOKSEARCH div.results { opacity: 0.1; }

div#SBOOKHUD #SBOOKTOC {display: none;}
div#SBOOKHUD .sbooksearch {display: none;}
div#SBOOKHUD .sbookechoes {display: none;}
div#SBOOKHUD .sbookping {display: none;}

body div#SBOOKHUD.toc #SBOOKTOC {display: block; }
body div#SBOOKHUD.search .sbooksearch {display: block; }
body div#SBOOKHUD.echoes .echoes {display: block; }
body div#SBOOKHUD.ping .sbookping {display: block; }

div#SBOOKSOCIAL {
  position: fixed; bottom: 0px; left: 15%; right: 15%;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-top-right-radius: 6px; 
  -webkit-border-top-right-radius: 6px; 
  -moz-border-radius-topright: 6px; 
  border-top-right-radius: 6px; 
  background-color: gray;}

div.echoes div.echo { display: none;}
div.echoes div.echo[displayed='yes'] { display: block;}
div.echoes.focused div.echo[displayed='yes'] { display: none;}
div.echoes.focused div.echo[displayed='yes'][focus='yes'] { display: block;}

div.echo div.head span.icons img { float: none; padding-left: 5px;}
div.echo div.head span.icons .age { color: orange;}

div.socialbar { 
  height: 40px;
  padding-right: 40px; padding-left: 40px; 
  overflow-x: auto; overflow-y: hidden;} 
div.socialbar img { cursor: pointer;}
/* This forces the browser to scale the image, which isn't ideal */
div.socialbar img.social { display: none; width: 32px; height: 32px;} 
div.socialbar img.social[displayed='yes']  {display: inline;}
div.socialbar img.everyone {
  position: absolute; left: 0px;}
div.socialbar img.ping {position: absolute; right: 0px;}

div#SBOOKHUD div.socialbar { opacity: 0.05; z-index: 150;}
div#SBOOKHUD div.socialbar.filled { opacity: 0.50; z-index: 150;}
div#SBOOKHUD div.socialbar:hover { opacity: 0.85; }
body div#SBOOKHUD.search div.socialbar:hover { opacity: 0.85;}
body div#SBOOKHUD.toc div.socialbar:hover { opacity: 0.85;}
body div#SBOOKHUD.browsing div.socialbar { opacity: 0.05;}
body.hudechoes div#SBOOKHUD div.socialbar { opacity: 0.85;}

/* Individual sub content */

div.sbookhud {}
div.sbookhud div.content {
  width: 100%; padding-left: 15%; padding-right: 15%;}

div#SBOOKHUD div#SOCIALHUD {
  position: fixed; bottom: 0px;
  margin-left: 10%; margin-right: 10%;}

/* TOC classes */

div.sbooktoc div.supersections { display: none;}
div.sbooktoc div.subsections { display: none;}

div.sbooktoc a { 
  text-decoration: none; color: blue;}
div.sbooktoc div.sbookhudsect {
  width: 100%; text-align: center; clear: both; }
div.sbooktoc div.sbookhudsect div.sectname {
  clear: both; } /* display: block;  */
div.sbooktoc div.supersection div.sectname {
  clear: both; } /* display: block; */
div.sbooktoc a:visited { color: blue; }
div.sbooktoc div.subsections a {color: blue;}

div.sbooktoc div.supersections a { font-size: 85%; }

div.sbooktoc div.subsections { 
  clear: both; font-size: 80%; margin-left: 15%; margin-right: 15%;}
div.sbooktoc div.subsections div.spanbar {
  width: 100%; clear: both;}
div.sbooktoc div.subsections div.sectlist {
  clear: both;}
div.sbooktoc div.subsections a {
    /* white-space: nowrap;  */
    display: inline; width: inherit; font-size: 50%;
    clear: none;}
div.sbooktoc div.subsections a.cohighlight {
    color: yellow;}

div.sbooktoc div.spanbar {
  position: relative;
  text-align: center; clear: both;
  opacity: 0.5; margin: 0px; padding: 0px; border: 0px;
  background-color: transparent; height: 14px; font-size: 3px;
  border-bottom: solid black 2px;}
div.sbooktoc div.spanbar div.spans { 
  position: relative;
  margin: 0px; padding: 0px; border: 0px;}
div.sbooktoc div.spanbar div.sbookhudspan {
  background-color: blue; clear: none; float: left;
  margin: 0px; padding: 0px; border: 0px;
  border-top: solid blue 2px; border-bottom: solid blue 2px;
  height: 10px; }
div.sbooktoc div.spanbar div.sbookhudspan[odd] {
  background-color: silver;
  border-top: solid silver 2px; border-bottom: solid silver 2px;}
div.sbooktoc div.spanbar div.sbookhudspan:hover { 
  border-top: dotted red 2px; border-bottom: dotted red 2px; }
div.sbooktoc div.spanbar div.sbookhudspan[odd]:hover {
  border-top: dotted red 2px; border-bottom: dotted red 2px; }
div.sbooktoc div.spanbar div.sbookhudspan.cohighlight { 
  background-color: yellow; border-color: yellow;}

div.sbooktoc div.echoes { 
  margin-left: 10%; margin-right: 10%;
  border-top: purple solid 3px;}
div.sbooktoc div.echoes div.echo { 
  padding-right: 5%; padding-left: 5%;}
div.sbooktoc div.echoes.showall div.echo { display: block;}

div#SBOOKHUD div#SOCIALTOC { 
  position: fixed; bottom: 0px; left: 10%; right: 10%;
  padding: 0px; margin: 0px; text-align: center;
  background-color: gray;
  overflow-y: hidden; overflow-x: auto; max-height: 60px;
  opacity: 0.05; display: none;}

div#SBOOKHUD.toc div#SOCIALTOC { display: block;}

div#SBOOKHEAD0 div.spanbar { width: 33%; margin-left: 33%; margin-right: 33%;}
div#SBOOKHEAD1 div.spanbar { width: 33%; margin-left: 33%; margin-right: 33%;}
div#SBOOKHEAD2 div.spanbar { width: 50%; margin-left: 25%; margin-right: 25%;}
div#SBOOKHEAD3 div.spanbar { 
  width: 75%; margin-left: 12.5%; margin-right: 12.5%;}

div.sbooktoc div.spanbar { padding: 0px; margin: 0px;}
div.sbooktoc div.spanbar div.spans { 
  width: 100%; height: 10px; padding: 0px; margin: 0px;}

div.sbooktoc div.spanbar div.progressbox { 
  width: 3px; height: 15px; background-color: red;
  position: absolute; z-index: 200; 
  margin: 0px; padding: 0px;}
div.sbooktoc div.spanbar div.rangebox { 
  height: 13px; /* border: orange solid 2px; */
  background-color: red; opacity: 0.5;
  position: absolute; z-index: 200; 
  margin: 0px; padding: 0px; border: 0px;}

/* Search rules */

div#SBOOKHUD.browsing div.sbooksearch div.results {
 display: block; opacity: 1.00;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions.open { display: none;}
div#SBOOKHUD.browsing
  div.sbooksearch .completions.open { display: none;}
div.sbooksearch .completions {
   margin-left: 0px; margin-right: 0px;
   max-height: 300px; width: 100%;}

div#SBOOKHUD div.hud#SBOOKSEARCH div.query {
   margin-left: 5%; margin-right: 5%;}

/* Search classes */

div#SBOOKHUD div.sbooksearch .completions { display: none;}
div#SBOOKHUD div.sbooksearch .completions.open { display: none;}
div#SBOOKHUD.searching div.sbooksearch div.completions { display: block;}
div#SBOOKHUD.searching div.sbooksearch div.completions.open { display: block;}

div.sbooksearch div.controls input[type="TEXT"] { 
  font-size: 16px; font-family: sans,sans-serif; 
  width: 100%; background-color: ivory;}
div.sbooksearch .completions { 
  text-align: left;
  font-size: 12px; font-family: sans,sans-serif; 
  padding-top: 5px; overflow: auto;}
div.sbooksearch .completions span.counts { 
  float: right; color: red; font-weight: bold;
  background-color: black;
  margin: 0px; padding: 3px; padding-top: 0px; padding-bottom: 0px;
  -khtml-border-radius: 3px; 
  -webkit-border-radius: 3px; 
  -moz-border-radius: 3px;
  border-radius: 3px;}
div.sbooksearch div.cues {}
div.sbooksearch div.query {}
div.sbooksearch div.results {min-height: 2ex;}

body[mode~="results"] div.sbooksearch div.controls div.messages { 
  display: none;}

div.sbooksearch span.completion.sectname {
  font-weight: bold; font-style: italic; 
  background-color: ivory; color: purple;
  padding: 3px; margin: 0px; margin-left: 3px; margin-right: 3px; 
  -khtml-border-radius: 6px; 
  -webkit-border-radius: 6px; 
  -moz-border-radius: 6px; 
  border-radius: 6px;}
div.sbooksearch span.dterm { 
  background-color: yellow; color: black;
  padding: 2px; padding-left: 5px;  margin: 0px;
  padding-right: 3px; margin-right: 3px;
  -khtml-border-top-left-radius: 6px; 
  -webkit-border-top-left-radius: 6px; 
  -moz-border-radius-topleft: 6px; 
  border-top-left-radius: 6px; 
  -khtml-border-bottom-left-radius: 6px; 
  -webkit-border-bottom-left-radius: 6px; 
  -moz-border-radius-bottomleft: 6px;
  border-bottom-left-radius: 6px;}
div.sbooksearch span.dterm span.bigpunct {
  font-size: 200%; font-weight: bold; line-height: 50%;}
div.sbooksearch .completions.showall span.dterm {display: inline;}
div.sbooksearch .completions.showall span.dterm.singleton {display: none;}
div.sbooksearch span.dterm span.disambig {color: red;}
div.sbooksearch .completions { line-height: 200%;}
div.sbooksearch .completions .completion.prime { 
  font-size: 200%; font-weight: bold;}
div.sbooksearch .completions .completion.sectname { 
  white-space: nowrap;}

div.sbooksearch .completions .completion .variation { 
  font-size: 115%; color: white;}
div.sbooksearch .completions .completion .dterm { 
  font-size: 95%;}

div.sbooksearch div.results {
  border-top: solid orange 3px;}
div.sbooksearch div.results div.count {
  text-align: right; color: orange; font-weight: bold;
  padding-top: 3px; }
div.sbooksearch div.results a.searchresult { 
  display: block; white-space: normal; clear: both;
  text-decoration: none;  font-size: 75%;
  margin-top: 4px; margin-bottom: 4px;
  margin-left: 50px; margin-right: 50px; 
  border-bottom: dotted orange 1px; padding-bottom: 3px;
  color: black; text-align: left;}
div.sbooksearch div.results a.searchresult .info { 
  float: right;}
div.sbooksearch div.results a.searchresult div.info { 
  float: right; width: 40px;}
div.sbooksearch div.results a.searchresult .info img.eye { 
  font-weight: bold; color: blue; border: none;}
div.sbooksearch div.results a.searchresult .info span.score {
  color: gold; display: none;}
div.sbooksearch div.results a.searchresult span.dterm {
    font-size: 75%;}
div.sbooksearch div.results a.searchresult span.head {
    font-size: 75%;}
div.sbooksearch div.results a.searchresult span.headhead {
    color: blue; font-weight: bold;}
div.sbooksearch div.results a.searchresult span.controller {
    font-weight: bold; color: white;}
a.searchresult span.msg { font-weight: bold; font-size: 110%;}
a.searchresult img.userpic { float: left; margin-right: 3px;}
a.searchresult .age { float: right; color: orange;}
a.searchresult img.detailsbutton { 
  float: right; border: none;
  margin-right: 3px; margin-left: 3px;}

span.excerpt { font-size: 120%; color: white;}
span.excerpt span.content { font-size: 80%; color: white; display: none;}
.showexcerpt span.excerpt span.content { display: inline;}
.showexcerpt span.excerpt span.ellipsis { display: none;}

div.detail { display: none; color: ivory; clear: both;}
.showdetail div.detail { display: block;}

/* Echoes stuff */

div#SBOOKHUD div.sbookechoes { }
div#SBOOKHUD div.sbookechoes div.echoes { 
  margin-top: 50px; margin-left: 15%; margin-right: 15%; width: 70%;}

div.sbookechoes div.topbar {
   width: 60%; margin-left: 20%; margin-right: 20%;}
div.sbookechoes div.topbar img { width: 32px; height: 32px;}

div.sbookechoes {
  width: 75%; margin-left: 12.5%; margin-right: 12.5%;
  text-align: left;}
div.sbookechoes div.topbar { width: 100%;}
div.sbookechoes div.topbar div.imagebar img[displayed='yes'] { display: inline;}
div.sbookechoes div.topbar div.imagebar img[displayed='no'] { display: none;}
div.sbookechoes img.addbutton { float: left;}
div.sbookechoes div.imagebar { margin-left: 50px; overflow-x: auto;}
div.sbookechoes div.echoes { overflow-y: auto;}
div.sbookechoes div.echoes div.echo {
   clear: both; width: 100%;}
div.sbookechoes div.echoes div.echo div.userblock { 
  float: left; width: 50px;}
div.sbookechoes div.echoes div.echo div.echoinfo {
  margin-left: 50px;}
div.sbookechoes div.echoes div.echo div.echoinfo div.msg {
  }
div.sbookechoes div.echoes div.echo div.echoinfo div.excerpt {
  }

/* Podspot iframes */

a.podspoticon {
  position: absolute; right: 5px; text-align: right;
  background-color: lightgray;
  border: solid transparent 1px;}
.sbookfocus a.podspoticon {
  border: solid black 1px;}
a.podspoticon img { border: 0px;}

img.ping.button#ROVER {
  position: absolute; right: 0px;}

iframe.podspot {
    position: absolute; right: 64px; width: 80%; z-index 100; 
    opacity: 0.95; background-color: ivory; min-height: 450;}

/* Still unclassified */

.previewing { color: red; }
p.previewing { color: red; }
div.previewing { color: red; }

div.sectionname { clear: both;}

/* SBOOK formatting */

body[hudup] iframe div.commentors { display: none;}
body iframe div.commentors { display: block;}

/* Emacs local variables
;;;  Local variables: ***
;;;  compile-command: "cd ..; make" ***
;;;  End: ***
*/
